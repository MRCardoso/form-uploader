!function(){"use strict";angular.module("form.uploader",["angularFileUpload","ngThumbCanvas"]).run(["$rootScope",function(n){}])}(),angular.module("table.grid").run(["$templateCache",function(n){n.put("form-uploader.html",'<div ng-if="uploader">\r\n    \r\n    <div ng-repeat="(type, msg) in messages">\r\n        <div ng-show="msg" class="alert alert-{{type}} alert-dismissible flash" role="alert">\r\n            <button type="button" ng-click="cleanMessage(type)" class="close">\r\n                <span aria-hidden="true">&times;</span>\r\n            </button>\r\n            <strong>\r\n                <i ng-class="{\'fa-warning\': type==\'danger\', \'fa-info\': type==\'info\', \'fa-check\': type==\'success\'}" class="fa"></i>\r\n            </strong>\r\n            {{msg}}\r\n        </div>\r\n    </div>\r\n\r\n    <div class="clear"></div>\r\n\r\n    <div class="text-center">\r\n        <div class="file-group-item">\r\n            <input type="file" nv-file-select multiple uploader="uploader" id="file" ng-hide="true">\r\n            <div ng-show="uploader.isHTML5" class="upFile" data-id="default" role="button">\r\n                <div nv-file-drop="" uploader="uploader" ng-click="openFile()">\r\n                    <div nv-file-over="file-over" uploader="uploader" over-class="another-file-over" class="well my-drop-zone">\r\n                        Arrate aqui ou clique para efetuar o upload\r\n                        <i class="fa fa-upload"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ng-show="uploader.queue.length>1">\r\n                <div class="col-md-3">\r\n                    <button type="button" class="btn btn-success btn-xs" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"\r\n                            tooltip="Enviar tudo" tooltip-placement="top" tooltip-trigger="mouseenter">\r\n                        <span class="glyphicon glyphicon-upload"></span>\r\n                    </button>\r\n                    <button type="button" class="btn btn-warning btn-xs" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"\r\n                            tooltip="Cancelar tudo" tooltip-placement="top" tooltip-trigger="mouseenter">\r\n                        <span class="glyphicon glyphicon-ban-circle"></span>\r\n                    </button>\r\n                    <button type="button" class="btn btn-danger btn-xs" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"\r\n                            tooltip="Remover tudo" tooltip-placement="top" tooltip-trigger="mouseenter">\r\n                        <span class="glyphicon glyphicon-remove"></span>\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-2">\r\n                    <span class="badge" ng-bind="uploader.queue.length"></span>\r\n                </div>\r\n                <div class="col-md-7">\r\n                    <div ng-show="uploader.isHTML5">\r\n                        <div class="progress" style="margin-bottom: 0;">\r\n                            <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }">{{ uploader.progress + \'%\'}}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="clear"></div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n\r\n    <div ng-repeat="item in uploader.queue">\r\n        <div class="file-group-item">\r\n            <div class="col-md-3">\r\n                <button type="button" class="btn btn-success btn-xs" uib-tooltip="Enviar" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">\r\n                    <span class="glyphicon glyphicon-upload"></span>\r\n                </button>\r\n                <button type="button" class="btn btn-warning btn-xs" uib-tooltip="Cancelar" ng-click="item.cancel()" ng-disabled="!item.isUploading">\r\n                    <span class="glyphicon glyphicon-ban-circle"></span>\r\n                </button>\r\n                <button type="button" uib-tooltip="Remover" class="btn btn-danger btn-xs" ng-click="deleteObject(item)">\r\n                    <span class="glyphicon glyphicon-remove"></span>\r\n                </button>\r\n                \r\n                <img src="images/loadingmrc.gif" width="80" ng-show="item.showLoading">\r\n\r\n                <span uib-tooltip="Progresso bem-sucedido" class="label label-success" ng-show="item.isSuccess">\r\n                    <i class="glyphicon glyphicon-ok"></i>\r\n                </span>\r\n                <span uib-tooltip="Progresso cancelado" class="label label-warning" ng-show="item.isCancel">\r\n                    <i class="glyphicon glyphicon-ban-circle"></i>\r\n                </span>\r\n                <span uib-tooltip="Erro no progresso" class="label label-danger" ng-show="item.isError">\r\n                    <i class="glyphicon glyphicon-alert"></i>\r\n                </span>\r\n            </div>\r\n\r\n            <div class="col-md-2">\r\n                <div ng-show="isImage(uploader.isHTML5, item.file)" ng-thumb="{ file: item._file, height: 100 }"></div>\r\n                <i class="fa fa-file" ng-hide="isImage(uploader.isHTML5, item.file)"></i>\r\n            </div>\r\n            <div class="col-md-2">\r\n                <div class="force-text" ng-bind="item.file.name| shortName:17:true"></div>\r\n            </div>\r\n            <div class="col-md-3">\r\n                <span tooltip="Size" tooltip-placement="top" tooltip-trigger="mouseenter" ng-show="uploader.isHTML5" nowrap>\r\n                    {{ item.file.size/1024/1024|number:2 }} MB\r\n                </span>\r\n            </div>\r\n            <div class="col-md-2">\r\n                <div ng-show="uploader.isHTML5">\r\n                    <div class="progress" style="margin-bottom: 0;">\r\n                        <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }">\r\n                            {{item.progress + \'%\'}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="clear"></div>\r\n        </div>\r\n    </div>\r\n</div>')}]),angular.module("ngThumbCanvas",[]).directive("ngThumb",["$window",function(n){console.log("bennngn");var e={support:!(!n.FileReader||!n.CanvasRenderingContext2D),isFile:function(e){return angular.isObject(e)&&e instanceof n.File},isImage:function(n){var e="|"+n.type.slice(n.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}};return{restrict:"A",template:"<canvas/>",link:function(n,i,r){function l(){var n=t.width||this.width/this.height*t.height,e=t.height||this.height/this.width*t.width;a.attr({width:n,height:e}),a[0].getContext("2d").drawImage(this,0,0,n,e)}if(e.support){var t=n.$eval(r.ngThumb);if(e.isFile(t.file)&&e.isImage(t.file)){var a=i.find("canvas"),s=new FileReader;s.onload=function(n){var e=new Image;e.onload=l,e.src=n.target.result},s.readAsDataURL(t.file)}}}}}]),angular.module("form.uploader").directive("formUploader",function(){return{restrict:"E",templateUrl:"form-uploader.html",scope:{many:"=?many",allowType:"@allowType",validators:"=?validators",defaultLimit:"=?defaultLimit",removeUrl:"=?removeUrl",sendUrl:"=?sendUrl"},controller:["$scope","FileUploader","$http",function(n,e,i){var r=angular.element,l=[],t=function(e,r,l){n.showLoading=!0,i.post(n.removeUrl,{Keys:r}).then(function(e){n.showLoading=!1,l(e)})};if(n.messages={danger:null,success:null,info:null},n.many=!angular.isUndefined(n.many)&&n.many,n.validators=angular.isUndefined(n.validators)?[]:n.validators,n.removeUrl=angular.isUndefined(n.removeUrl)?null:n.removeUrl,n.defaultLimit=angular.isUndefined(n.defaultLimit)?3145728:n.defaultLimit,angular.isUndefined(n.sendUrl))return console.warn("Por Favor, Defina uma 'url' para este upload");n.cleanMessage=function(e){n.messages[e]=null},n.openFile=function(){r(document).off("click.upFile").on("click.upFile",".upFile",function(){r("#file").off("click").trigger("click")})},n.deleteObject=function(e){l.length>0&&null!=n.removeUrl?t(0,l,function(i){currentFile=[],n.messages.success=i.data.output,e.remove()}):e.remove()};var a=n.uploader=new e({url:n.sendUrl,queueLimit:n.defaultLimit}),s=n.validators;angular.isUndefined(n.allowType)||s.push({name:"typeAllow",fn:function(e,i){var r=new RegExp(n.allowType,"i").test(e.name);return r||(n.messages.info="Extensão inválida, o arquivo deve ser '"+n.allowType.replace("|",",")+"'"),r}}),a.filters=s,a.onProgressItem=function(n,e){},a.onSuccessItem=function(n,e,i,r){},a.onErrorItem=function(n,e,i,r){},a.onBeforeUploadItem=function(n){n.showLoading=!0},a.onAfterAddingFile=function(e){n.many||e.uploader.queue.length>1&&e.uploader.queue.shift()},a.onCancelItem=function(e,i,r,a){t(0,l,function(){n.messages.info="Envio abortado com sucess!"})},a.onCompleteItem=function(e,i,r,t){e.showLoading=!1,0!=r&&""!=i&&(200==r?(l.push(i.data.Key),n.messages.success=i.message):n.messages.danger=i.message)}}]}});