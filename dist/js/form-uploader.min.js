!function(){"use strict";angular.module("form.uploader",["angularFileUpload","ngThumbCanvas"]).run(["$rootScope",function(e){}])}(),angular.module("form.uploader").run(["$templateCache",function(e){e.put("form-uploader.html",'<div ng-if="uploader">\n    \n    <div ng-repeat="(type, msg) in messages">\n        <div ng-show="msg" class="alert alert-{{type}} alert-dismissible flash" role="alert">\n            <button type="button" ng-click="cleanMessage(type)" class="close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n            <strong>\n                <i ng-class="{\'fa-warning\': type==\'danger\', \'fa-info\': type==\'info\', \'fa-check\': type==\'success\'}" class="fa"></i>\n            </strong>\n            {{msg}}\n        </div>\n    </div>\n\n    <div class="clear"></div>\n\n    <div class="text-center">\n        <input type="file" nv-file-select multiple uploader="uploader" id="file" ng-hide="true">\n        <div ng-show="uploader.isHTML5" class="upFile" data-id="default" role="button">\n            <div nv-file-drop="" uploader="uploader" ng-click="openFile()">\n                <div nv-file-over="file-over" uploader="uploader" over-class="another-file-over" class="well my-drop-zone">\n                    Arrate aqui ou clique para efetuar o upload\n                    <i class="fa fa-upload"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div ng-show="uploader.queue.length>1">\n        <div class="file-group-item">\n            <div class="col-md-3">\n                <button type="button" class="btn btn-success btn-xs" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"\n                        uib-tooltip="Enviar tudo" uib-tooltip-placement="top" uib-tooltip-trigger="mouseenter">\n                    <span class="glyphicon glyphicon-upload"></span>\n                </button>\n                <button type="button" class="btn btn-warning btn-xs" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"\n                        uib-tooltip="Cancelar tudo" uib-tooltip-placement="top" uib-tooltip-trigger="mouseenter">\n                    <span class="glyphicon glyphicon-ban-circle"></span>\n                </button>\n                <button type="button" class="btn btn-danger btn-xs" ng-click="deleteAll(uploader)" ng-disabled="!uploader.queue.length"\n                        uib-tooltip="Remover tudo" uib-tooltip-placement="top" uib-tooltip-trigger="mouseenter">\n                    <span class="glyphicon glyphicon-remove"></span>\n                </button>\n            </div>\n            <div class="col-md-2 text-center">\n                <span class="badge" ng-bind="uploader.queue.length"></span>\n            </div>\n            <div class="col-md-7">\n                <div ng-show="uploader.isHTML5">\n                    <div class="progress" style="margin-bottom: 0;">\n                        <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }">{{ uploader.progress + \'%\'}}</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="clear"></div>\n        </div>\n    </div>\n\n    <div ng-repeat="item in uploader.queue">\n        <div class="file-group-item">\n            <div class="col-md-3">\n                <button type="button" class="btn btn-success btn-xs" uib-tooltip="Enviar" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">\n                    <span class="glyphicon glyphicon-upload"></span>\n                </button>\n                <button type="button" class="btn btn-warning btn-xs" uib-tooltip="Cancelar" ng-click="item.cancel()" ng-disabled="!item.isUploading">\n                    <span class="glyphicon glyphicon-ban-circle"></span>\n                </button>\n                <button type="button" uib-tooltip="Remover" class="btn btn-danger btn-xs" ng-click="deleteItem(item)">\n                    <span class="glyphicon glyphicon-remove"></span>\n                </button>\n                \n                <i ng-show="item.showLoading" class="loader glyphicon glyphicon-repeat"></i>\n\n                <span uib-tooltip="Progresso bem-sucedido" class="label label-success" ng-show="item.isSuccess">\n                    <i class="glyphicon glyphicon-ok"></i>\n                </span>\n                <span uib-tooltip="Progresso cancelado" class="label label-warning" ng-show="item.isCancel">\n                    <i class="glyphicon glyphicon-ban-circle"></i>\n                </span>\n                <span uib-tooltip="Erro no progresso" class="label label-danger" ng-show="item.isError">\n                    <i class="glyphicon glyphicon-alert"></i>\n                </span>\n            </div>\n\n            <div class="col-md-2 text-center">\n                <div ng-show="isImage(uploader.isHTML5, item.file)" ng-thumb="{ file: item._file, height: 80 }"></div>\n                <i class="glyphicon glyphicon-file" ng-hide="isImage(uploader.isHTML5, item.file)"></i>\n            </div>\n            <div class="col-md-4 text-center">\n                <div class="force-text" ng-bind="item.file.name| shortName:17:true" uib-tooltip="{{item.file.name}}"></div>\n            </div>\n            <div class="col-md-1">\n                <span tooltip="Size" tooltip-placement="top" tooltip-trigger="mouseenter" ng-show="uploader.isHTML5" nowrap>\n                    {{ item.file.size/1024/1024|number:2 }} MB\n                </span>\n            </div>\n            <div class="col-md-2">\n                <div ng-show="uploader.isHTML5">\n                    <div class="progress" style="margin-bottom: 0;">\n                        <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }">\n                            {{item.progress + \'%\'}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="clear"></div>\n        </div>\n    </div>\n</div>')}]),angular.module("ngThumbCanvas",[]).directive("ngThumb",["$window",function(e){console.log("bennngn");var n=!(!e.FileReader||!e.CanvasRenderingContext2D),i=function(n){return angular.isObject(n)&&n instanceof e.File},l=function(e){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(n)};return{restrict:"A",template:"<canvas/>",link:function(e,t,a){if(n){var o=e.$eval(a.ngThumb);if(i(o.file)&&l(o.file)){var s=t.find("canvas"),r=new FileReader;r.onload=function(e){var n=new Image;n.onload=d,n.src=e.target.result},r.readAsDataURL(o.file)}}function d(){var e=o.width||this.width/this.height*o.height,n=o.height||this.height/this.width*o.width;s.attr({width:e,height:n}),s[0].getContext("2d").drawImage(this,0,0,e,n)}}}}]),angular.module("form.uploader").directive("formUploader",function(){return{restrict:"E",templateUrl:"form-uploader.html",scope:{many:"=?many",allowType:"@allowType",validators:"=?validators",defaultLimit:"=?defaultLimit",removeUrl:"=?removeUrl",sendUrl:"=?sendUrl"},controller:["$scope","FileUploader","$http","$filter",function(e,n,i,l){if(angular.isUndefined(e.sendUrl))return console.warn("Por Favor, Defina uma 'url' para este upload");var t=[],a=function(n,l){i.post(e.removeUrl,{Keys:n}).then(function(e){l(e)},function(n){e.messages.danger=n.data.message})};e.messages={danger:null,success:null,info:null},e.many=!angular.isUndefined(e.many)&&e.many,e.validators=angular.isUndefined(e.validators)?[]:e.validators,e.removeUrl=angular.isUndefined(e.removeUrl)?null:e.removeUrl,e.defaultLimit=angular.isUndefined(e.defaultLimit)?3145728:e.defaultLimit,e.cleanMessage=function(n){e.messages[n]=null},e.openFile=function(){var e=angular.element;e(document).off("click.upFile").on("click.upFile",".upFile",function(){e("#file").off("click").trigger("click")})},e.isImage=function(e,n){return!!/(gif|jpg|jpeg|png|x-png|pjpeg)/.test(n.type)&&e},e.deleteItem=function(n){"uploadedPath"in n&&null!=e.removeUrl?(n.showLoading=!0,a([n.uploadedPath],function(i){n.showLoading=!1,e.messages.success=i.data.message,n.remove()})):n.remove()},e.deleteAll=function(n){t.length>0&&null!=e.removeUrl?a(t,function(i){t=[],e.messages.success=i.data.message,n.clearQueue()}):n.clearQueue()};var o=e.uploader=new n({url:e.sendUrl,queueLimit:e.defaultLimit}),s=e.validators;angular.isUndefined(e.allowType)||s.push({name:"typeAllow",fn:function(n,i){var l=new RegExp(e.allowType,"i").test(n.name);return l||(e.messages.info="Extensão inválida, o arquivo deve ser '"+e.allowType.replace(/(\|)/gi,", ")+"'"),l}}),s.push({name:"sizeAllow",fn:function(n,i){var t=n.size>e.defaultLimit;return t&&(e.messages.info="O arquivo excedeu o tamanho máximo permitido "+l("number")(e.defaultLimit,2)+"MB"),!t}}),o.filters=s,o.onAfterAddingFile=function(n){e.many||n.uploader.queue.length>1&&(n.uploader.queue=[n.uploader.queue[n.uploader.queue.length-1]])},o.onBeforeUploadItem=function(n){n.showLoading=!0,e.$root.$broadcast("form.uploader.begin")},o.onCancelItem=function(n,i,l,t){e.messages.info="Envio abortado com sucess!"},o.onCompleteItem=function(n,i,l,a){n.showLoading=!1,0!=l&&""!=i&&(200==l?(n.uploadedPath=i.path,t.push(i.path),e.messages.success=i.message):e.messages.danger=i.message),e.$root.$broadcast("form.uploader.finish",i)}}]}}),angular.module("form.uploader").filter("shortName",function(){return function(e,n,i){if(n=n||20,i=!!angular.isDefined(i)&&i,e.length>20){var l=e.substr(0,n);if(i){l+=["...(.",e.split(".").pop(),")"].join("")}return l}return e}});